{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import'../../style/addProduct.css';import ApiService from\"../../service/ApiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddProductPage=()=>{const[image,setImage]=useState(null);const[categories,setCategories]=useState([]);const[categoryId,setCategoryId]=useState('');const[name,setName]=useState('');const[description,setDescription]=useState('');const[message,setMessage]=useState('');const[price,setPrice]=useState('');const navigate=useNavigate();useEffect(()=>{ApiService.getAllCategory().then(res=>setCategories(res.categoryList));},[fetchCategories]);const handleImage=e=>{setImage(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();try{const formData=new FormData();formData.append('image',image);formData.append('categoryId',categoryId);formData.append('name',name);formData.append('description',description);formData.append('price',price);const response=await ApiService.addProduct(formData);if(response.status===200){setMessage(response.message);setTimeout(()=>{setMessage('');navigate('/admin/products');},3000);}}catch(error){var _error$response,_error$response$data;setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'unable to upload product');}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"product-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Product\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImage}),/*#__PURE__*/_jsxs(\"select\",{value:categoryId,onChange:e=>setCategoryId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"price\",value:price,onChange:e=>setPrice(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Product\"})]})});};export default AddProductPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ApiService","jsx","_jsx","jsxs","_jsxs","AddProductPage","image","setImage","categories","setCategories","categoryId","setCategoryId","name","setName","description","setDescription","message","setMessage","price","setPrice","navigate","getAllCategory","then","res","categoryList","fetchCategories","handleImage","e","target","files","handleSubmit","preventDefault","formData","FormData","append","response","addProduct","status","setTimeout","error","_error$response","_error$response$data","data","children","onSubmit","className","type","onChange","value","map","cat","id","placeholder"],"sources":["C:/Users/MSI GF63/Desktop/ShoppingWeb/frontend/src/component/admin/AddProductPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../../style/addProduct.css'\r\nimport ApiService from \"../../service/ApiService\";\r\n\r\nconst AddProductPage = () => {\r\n\r\n    const [image, setImage] = useState(null);\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryId, setCategoryId] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [price, setPrice] = useState('');\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        ApiService.getAllCategory().then((res) => setCategories(res.categoryList));\r\n    }, [fetchCategories]);\r\n\r\n    const handleImage = (e) => {\r\n        setImage(e.target.files[0])\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('image', image);\r\n            formData.append('categoryId', categoryId);\r\n            formData.append('name', name);\r\n            formData.append('description', description);\r\n            formData.append('price', price);\r\n\r\n            const response = await ApiService.addProduct(formData);\r\n            if (response.status === 200) {\r\n                setMessage(response.message)\r\n                setTimeout(() => {\r\n                    setMessage('')\r\n                    navigate('/admin/products')\r\n                }, 3000);\r\n            }\r\n\r\n        } catch (error) {\r\n            setMessage(error.response?.data?.message || error.message || 'unable to upload product')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <form onSubmit={handleSubmit} className=\"product-form\">\r\n                <h2>Add Product</h2>\r\n                {message && <div className=\"message\">{message}</div>}\r\n                <input type=\"file\" onChange={handleImage} />\r\n                <select value={categoryId} onChange={(e) => setCategoryId(e.target.value)} >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((cat)=>(\r\n                        <option value={cat.id} key={cat.id}>{cat.name}</option>\r\n                    ))}\r\n                </select>\r\n                <input type=\"text\" \r\n                placeholder=\"Product name\"\r\n                value={name}\r\n                onChange={(e)=> setName(e.target.value)} />\r\n\r\n                <textarea \r\n                placeholder=\"Description\"\r\n                value={description}\r\n                onChange={(e)=> setDescription(e.target.value)}/>\r\n\r\n                <input type=\"number\" \r\n                placeholder=\"price\"\r\n                value={price}\r\n                onChange={(e)=> setPrice(e.target.value)} />\r\n\r\n                <button type=\"submit\">Add Product</button>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default AddProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}